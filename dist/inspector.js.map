{"version":3,"file":"inspector.js","sources":["../src/inspector/element.js","../src/inspector/global.js","../src/inspector/templates/debug.js","../src/inspector/templates/document.js","../src/inspector/templates/performance.js","../src/inspector/templates/render.js","../src/inspector/templates/selection.js","../src/inspector/templates/undo.js","../src/inspector/control_element.js","../src/rico/core/helpers/arrays.js","../src/rico/config/block_attributes.js","../src/rico/constants.js","../src/rico/core/helpers/extend.js","../src/rico/core/helpers/dom.js","../src/rico/core/helpers/bidi.js","../src/rico/config/browser.js","../src/rico/config/input.js","../src/rico/config/key_names.js","../src/rico/config/lang.js","../src/rico/config/parser.js","../src/rico/config/text_attributes.js","../src/rico/config/toolbar.js","../src/rico/config/undo.js","../src/rico/core/helpers/config.js","../src/rico/core/helpers/events.js","../src/rico/core/helpers/functions.js","../src/rico/core/helpers/objects.js","../src/rico/core/helpers/ranges.js","../src/rico/core/basic_object.js","../src/rico/observers/selection_change_observer.js","../src/rico/core/utilities/utf16_string.js","../src/rico/core/helpers/strings.js","../src/inspector/view.js","../src/inspector/views/debug_view.js","../src/inspector/views/document_view.js","../src/inspector/views/performance_view.js","../src/inspector/views/render_view.js","../src/inspector/views/selection_view.js","../src/inspector/views/undo_view.js"],"sourcesContent":["/* eslint-disable\n    id-length,\n*/\n\nexport default class RicoInspector extends HTMLElement {\n  connectedCallback() {\n    this.editorElement = document.querySelector(`rico-editor[rico-id='${this.dataset.ricoId}']`)\n    this.views = this.createViews()\n\n    this.views.forEach((view) => {\n      view.render()\n      this.appendChild(view.element)\n    })\n\n  }\n\n  disconnectedCallback() {\n    removeEventListener(\"resize\", this.resizeHandler)\n  }\n\n  createViews() {\n    const views = Rico.Inspector.views.map((View) => new View(this.editorElement))\n\n    return views.sort((a, b) => a.title.toLowerCase() > b.title.toLowerCase())\n  }\n}\n\nwindow.customElements.define(\"rico-inspector\", RicoInspector)\n","window.Rico.Inspector = {\n  views: [],\n\n  registerView(constructor) {\n    return this.views.push(constructor)\n  },\n\n  install(editorElement) {\n    this.editorElement = editorElement\n    const element = document.createElement(\"rico-inspector\")\n    element.dataset.ricoId = this.editorElement.ricoId\n    return document.body.appendChild(element)\n  },\n}\n","if (!window.JST) window.JST = {}\n\nwindow.JST[\"rico/inspector/templates/debug\"] = function() {\n  return `<p>\n  <label>\n    <input type=\"checkbox\" name=\"viewCaching\" checked=\"${this.compositionController.isViewCachingEnabled()}\">\n    Cache views between renders\n  </label>\n</p>\n\n<p>\n  <button data-action=\"render\">Force Render</button> <button data-action=\"parse\">Parse current HTML</button>\n</p>\n\n<p>\n  <label>\n    <input type=\"checkbox\" name=\"controlElement\">\n    Show <code>contenteditable</code> control element\n  </label>\n</p>` }\n","if (!window.JST) window.JST = {}\n\nwindow.JST[\"rico/inspector/templates/document\"] = function() {\n  const details = this.document.getBlocks().map((block, index) => {\n    const { text } = block\n    const pieces = text.pieceList.toArray()\n\n    return `<details class=\"block\">\n      <summary class=\"title\">\n        Block ${block.id}, Index: ${index}\n      </summary>\n      <div class=\"attributes\">\n        Attributes: ${JSON.stringify(block.attributes)}\n      </div>\n\n      <div class=\"text\">\n        <div class=\"title\">\n          Text: ${text.id}, Pieces: ${pieces.length}, Length: ${text.getLength()}\n        </div>\n        <div class=\"pieces\">\n          ${piecePartials(pieces).join(\"\\n\")}\n        </div>\n      </div>\n    </details>`\n  })\n\n  return details.join(\"\\n\")\n}\n\nconst piecePartials = (pieces) =>\n  pieces.map((piece, index) =>`<div class=\"piece\">\n      <div class=\"title\">\n        Piece ${piece.id}, Index: ${index}\n      </div>\n      <div class=\"attributes\">\n        Attributes: ${JSON.stringify(piece.attributes)}\n      </div>\n      <div class=\"content\">\n        ${JSON.stringify(piece.toString())}\n      </div>\n    </div>`)\n","if (!window.JST) window.JST = {}\n\nwindow.JST[\"rico/inspector/templates/performance\"] = function() {\n  return Object.keys(this.data).map((name) => {\n      const data = this.data[name]\n      return dataMetrics(name, data, this.round)\n  }).join(\"\\n\")\n}\n\nconst dataMetrics = function(name, data, round) {\n  let item = `<strong>${name}</strong> (${data.calls})<br>`\n\n  if (data.calls > 0) {\n    item += `<div class=\"metrics\">\n        Mean: ${round(data.mean)}ms<br>\n        Max: ${round(data.max)}ms<br>\n        Last: ${round(data.last)}ms\n      </div>`\n\n    return item\n  }\n}\n","if (!window.JST) window.JST = {}\n\nwindow.JST[\"rico/inspector/templates/render\"] = () => `Syncs: ${this.syncCount}`\n","if (!window.JST) window.JST = {}\n\nwindow.JST[\"rico/inspector/templates/selection\"] = function() {\n  return `Location range: [${this.locationRange[0].index}:${this.locationRange[0].offset}, ${this.locationRange[1].index}:${this.locationRange[1].offset}]\n    ${charSpans(this.characters).join(\"\\n\")}`\n}\n\nconst charSpans = (characters) =>\n  Array.from(characters).map(\n    (char) => `<span class=\"character ${char.selected ? \"selected\" : undefined}\">${char.string}</span>`\n  )\n","if (!window.JST) window.JST = {}\n\nwindow.JST[\"rico/inspector/templates/undo\"] = () =>\n  `<h4>Undo stack</h4>\n    <ol class=\"undo-entries\">\n      ${entryList(this.undoEntries)}\n    </ol>\n    <h4>Redo stack</h4>\n    <ol class=\"redo-entries\">\n      ${entryList(this.redoEntries)}\n    </ol>`\n\nconst entryList = (entries) =>\n  entries.map((entry) =>\n    `<li>${entry.description} ${JSON.stringify({\n      selectedRange: entry.snapshot.selectedRange,\n      context: entry.context,\n    })}</li>`)\n","const KEY_EVENTS = \"keydown keypress input\".split(\" \")\nconst COMPOSITION_EVENTS = \"compositionstart compositionupdate compositionend textInput\".split(\" \")\nconst OBSERVER_OPTIONS = {\n  attributes: true,\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true,\n  subtree: true,\n}\n\nexport default class ControlElement {\n  constructor(editorElement) {\n    this.didMutate = this.didMutate.bind(this)\n    this.editorElement = editorElement\n    this.install()\n  }\n\n  install() {\n    this.createElement()\n    this.logInputEvents()\n    this.logMutations()\n  }\n\n  uninstall() {\n    this.observer.disconnect()\n    this.element.parentNode.removeChild(this.element)\n  }\n\n  createElement() {\n    this.element = document.createElement(\"div\")\n    this.element.setAttribute(\"contenteditable\", \"\")\n    this.element.style.width = getComputedStyle(this.editorElement).width\n    this.element.style.minHeight = \"50px\"\n    this.element.style.border = \"1px solid green\"\n    this.editorElement.parentNode.insertBefore(this.element, this.editorElement.nextSibling)\n  }\n\n  logInputEvents() {\n    KEY_EVENTS.forEach((eventName) => {\n      this.element.addEventListener(eventName, (event) => console.log(`${event.type}: keyCode = ${event.keyCode}`))\n    })\n\n    COMPOSITION_EVENTS.forEach((eventName) => {\n      this.element.addEventListener(eventName, (event) =>\n        console.log(`${event.type}: data = ${JSON.stringify(event.data)}`)\n      )\n    })\n  }\n\n  logMutations() {\n    this.observer = new window.MutationObserver(this.didMutate)\n    this.observer.observe(this.element, OBSERVER_OPTIONS)\n  }\n\n  didMutate(mutations) {\n    console.log(`Mutations (${mutations.length}):`)\n    for (let index = 0; index < mutations.length; index++) {\n      const mutation = mutations[index]\n      console.log(` ${index + 1}. ${mutation.type}:`)\n      switch (mutation.type) {\n        case \"characterData\":\n          console.log(`  oldValue = ${JSON.stringify(mutation.oldValue)}, newValue = ${JSON.stringify(mutation.target.data)}`)\n          break\n        case \"childList\":\n          Array.from(mutation.addedNodes).forEach((node) => {\n            console.log(`  node added ${inspectNode(node)}`)\n          })\n\n          Array.from(mutation.removedNodes).forEach((node) => {\n            console.log(`  node removed ${inspectNode(node)}`)\n          })\n      }\n    }\n  }\n}\n\nconst inspectNode = function(node) {\n  if (node.data) {\n    return JSON.stringify(node.data)\n  } else {\n    return JSON.stringify(node.outerHTML)\n  }\n}\n","/* eslint-disable\n    id-length,\n*/\nexport const arraysAreEqual = function(a = [], b = []) {\n  if (a.length !== b.length) {\n    return false\n  }\n  for (let index = 0; index < a.length; index++) {\n    const value = a[index]\n    if (value !== b[index]) {\n      return false\n    }\n  }\n  return true\n}\n\nexport const arrayStartsWith = (a = [], b = []) => arraysAreEqual(a.slice(0, b.length), b)\n\nexport const spliceArray = function(array, ...args) {\n  const result = array.slice(0)\n  result.splice(...args)\n  return result\n}\n\nexport const summarizeArrayChange = function(oldArray = [], newArray = []) {\n  const added = []\n  const removed = []\n\n  const existingValues = new Set()\n\n  oldArray.forEach((value) => {\n    existingValues.add(value)\n  })\n\n  const currentValues = new Set()\n\n  newArray.forEach((value) => {\n    currentValues.add(value)\n    if (!existingValues.has(value)) {\n      added.push(value)\n    }\n  })\n\n  oldArray.forEach((value) => {\n    if (!currentValues.has(value)) {\n      removed.push(value)\n    }\n  })\n\n  return { added, removed }\n}\n","const attributes = {\n  default: {\n    tagName: \"p\",\n    breakOnReturn: true,\n    parse: false,\n  },\n  quote: {\n    tagName: \"blockquote\",\n  },\n  heading1: {\n    tagName: \"h1\",\n    terminal: true,\n    breakOnReturn: true,\n    group: false,\n  },\n  heading2: {\n    tagName: \"h2\",\n    terminal: true,\n    breakOnReturn: true,\n    group: false,\n  },\n  code: {\n    tagName: \"pre\",\n    terminal: true,\n    text: {\n      plaintext: true,\n    },\n  },\n  bulletList: {\n    tagName: \"ul\",\n    parse: false,\n  },\n  bullet: {\n    tagName: \"li\",\n    listAttribute: \"bulletList\",\n    group: false,\n    nestable: true,\n    test(element) {\n      return tagName(element.parentNode) === attributes[this.listAttribute].tagName\n    },\n  },\n  numberList: {\n    tagName: \"ol\",\n    parse: false,\n  },\n  number: {\n    tagName: \"li\",\n    listAttribute: \"numberList\",\n    group: false,\n    nestable: true,\n    test(element) {\n      return tagName(element.parentNode) === attributes[this.listAttribute].tagName\n    },\n  },\n}\n\nconst tagName = (element) => element?.tagName?.toLowerCase()\n\nexport default attributes\n","export const ZERO_WIDTH_SPACE = \"\\uFEFF\"\nexport const NON_BREAKING_SPACE = \"\\u00A0\"\nexport const OBJECT_REPLACEMENT_CHARACTER = \"\\uFFFC\"\n","export const extend = function(properties) {\n  for (const key in properties) {\n    const value = properties[key]\n    this[key] = value\n  }\n  return this\n}\n","import blockAttributes from \"rico/config/block_attributes\"\nimport { ZERO_WIDTH_SPACE } from \"rico/constants\"\nimport { extend } from \"./extend\"\n\nconst html = document.documentElement\nconst match = html.matches\n\nexport const handleEvent = function(eventName, { onElement, matchingSelector, withCallback, inPhase, preventDefault, times } = {}) {\n  const element = onElement ? onElement : html\n  const selector = matchingSelector\n  const useCapture = inPhase === \"capturing\"\n\n  const handler = function(event) {\n    if (times != null && --times === 0) {\n      handler.destroy()\n    }\n    const target = findClosestElementFromNode(event.target, { matchingSelector: selector })\n    if (target != null) {\n      withCallback?.call(target, event, target)\n      if (preventDefault) {\n        event.preventDefault()\n      }\n    }\n  }\n\n  handler.destroy = () => element.removeEventListener(eventName, handler, useCapture)\n\n  element.addEventListener(eventName, handler, useCapture)\n  return handler\n}\n\nexport const handleEventOnce = function(eventName, options = {}) {\n  options.times = 1\n  return handleEvent(eventName, options)\n}\n\nexport const triggerEvent = function(eventName, { onElement, bubbles, cancelable, attributes } = {}) {\n  const element = onElement != null ? onElement : html\n  bubbles = bubbles !== false\n  cancelable = cancelable !== false\n\n  const event = document.createEvent(\"Events\")\n  event.initEvent(eventName, bubbles, cancelable)\n  if (attributes != null) {\n    extend.call(event, attributes)\n  }\n  return element.dispatchEvent(event)\n}\n\nexport const elementMatchesSelector = function(element, selector) {\n  if (element?.nodeType === 1) {\n    return match.call(element, selector)\n  }\n}\n\nexport const findClosestElementFromNode = function(node, { matchingSelector, untilNode } = {}) {\n  while (node && node.nodeType !== Node.ELEMENT_NODE) {\n    node = node.parentNode\n  }\n  if (node == null) {\n    return\n  }\n\n  if (matchingSelector != null) {\n    if (node.closest && untilNode == null) {\n      return node.closest(matchingSelector)\n    } else {\n      while (node && node !== untilNode) {\n        if (elementMatchesSelector(node, matchingSelector)) {\n          return node\n        }\n        node = node.parentNode\n      }\n    }\n  } else {\n    return node\n  }\n}\n\nexport const findInnerElement = function(element) {\n  while (element?.firstElementChild) {\n    element = element.firstElementChild\n  }\n  return element\n}\n\nexport const innerElementIsActive = (element) =>\n  document.activeElement !== element && elementContainsNode(element, document.activeElement)\n\nexport const elementContainsNode = function(element, node) {\n  if (!element || !node) {\n    return\n  }\n  while (node) {\n    if (node === element) {\n      return true\n    }\n    node = node.parentNode\n  }\n}\n\nexport const findNodeFromContainerAndOffset = function(container, offset) {\n  if (!container) {\n    return\n  }\n  if (container.nodeType === Node.TEXT_NODE) {\n    return container\n  } else if (offset === 0) {\n    return container.firstChild != null ? container.firstChild : container\n  } else {\n    return container.childNodes.item(offset - 1)\n  }\n}\n\nexport const findElementFromContainerAndOffset = function(container, offset) {\n  const node = findNodeFromContainerAndOffset(container, offset)\n  return findClosestElementFromNode(node)\n}\n\nexport const findChildIndexOfNode = function(node) {\n  if (!node?.parentNode) {\n    return\n  }\n  let childIndex = 0\n  node = node.previousSibling\n  while (node) {\n    childIndex++\n    node = node.previousSibling\n  }\n  return childIndex\n}\n\nexport const removeNode = (node) => node?.parentNode?.removeChild(node)\n\nexport const walkTree = function(tree, { onlyNodesOfType, usingFilter, expandEntityReferences } = {}) {\n  const whatToShow = (() => {\n    switch (onlyNodesOfType) {\n      case \"element\":\n        return NodeFilter.SHOW_ELEMENT\n      case \"text\":\n        return NodeFilter.SHOW_TEXT\n      case \"comment\":\n        return NodeFilter.SHOW_COMMENT\n      default:\n        return NodeFilter.SHOW_ALL\n    }\n  })()\n\n  return document.createTreeWalker(\n    tree,\n    whatToShow,\n    usingFilter != null ? usingFilter : null,\n    expandEntityReferences === true\n  )\n}\n\nexport const tagName = (element) => element?.tagName?.toLowerCase()\n\nexport const makeElement = function(tag, options = {}) {\n  let key, value\n  if (typeof tag === \"object\") {\n    options = tag\n    tag = options.tagName\n  } else {\n    options = { attributes: options }\n  }\n\n  const element = document.createElement(tag)\n\n  if (options.editable != null) {\n    if (options.attributes == null) {\n      options.attributes = {}\n    }\n    options.attributes.contenteditable = options.editable\n  }\n\n  if (options.attributes) {\n    for (key in options.attributes) {\n      value = options.attributes[key]\n      element.setAttribute(key, value)\n    }\n  }\n\n  if (options.style) {\n    for (key in options.style) {\n      value = options.style[key]\n      element.style[key] = value\n    }\n  }\n\n  if (options.data) {\n    for (key in options.data) {\n      value = options.data[key]\n      element.dataset[key] = value\n    }\n  }\n\n  if (options.className) {\n    options.className.split(\" \").forEach((className) => {\n      element.classList.add(className)\n    })\n  }\n\n  if (options.textContent) {\n    element.textContent = options.textContent\n  }\n\n  if (options.childNodes) {\n    [].concat(options.childNodes).forEach((childNode) => {\n      element.appendChild(childNode)\n    })\n  }\n\n  return element\n}\n\nlet blockTagNames = undefined\n\nexport const getBlockTagNames = function() {\n  if (blockTagNames != null) {\n    return blockTagNames\n  }\n\n  blockTagNames = []\n  for (const key in blockAttributes) {\n    const attributes = blockAttributes[key]\n    if (attributes.tagName) {\n      blockTagNames.push(attributes.tagName)\n    }\n  }\n\n  return blockTagNames\n}\n\nexport const nodeIsBlockContainer = (node) => nodeIsBlockStartComment(node?.firstChild)\n\nexport const nodeProbablyIsBlockContainer = function(node) {\n  return getBlockTagNames().includes(tagName(node)) && !getBlockTagNames().includes(tagName(node.firstChild))\n}\n\nexport const nodeIsBlockStart = function(node, { strict } = { strict: true }) {\n  if (strict) {\n    return nodeIsBlockStartComment(node)\n  } else {\n    return (\n      nodeIsBlockStartComment(node) || !nodeIsBlockStartComment(node.firstChild) && nodeProbablyIsBlockContainer(node)\n    )\n  }\n}\n\nexport const nodeIsBlockStartComment = (node) => nodeIsCommentNode(node) && node?.data === \"block\"\n\nexport const nodeIsCommentNode = (node) => node?.nodeType === Node.COMMENT_NODE\n\nexport const nodeIsCursorTarget = function(node, { name } = {}) {\n  if (!node) {\n    return\n  }\n  if (nodeIsTextNode(node)) {\n    if (node.data === ZERO_WIDTH_SPACE) {\n      if (name) {\n        return node.parentNode.dataset.ricoCursorTarget === name\n      } else {\n        return true\n      }\n    }\n  } else {\n    return nodeIsCursorTarget(node.firstChild)\n  }\n}\n\nexport const nodeIsEmptyTextNode = (node) => nodeIsTextNode(node) && node?.data === \"\"\n\nexport const nodeIsTextNode = (node) => node?.nodeType === Node.TEXT_NODE\n","import { makeElement } from \"rico/core/helpers/dom\"\n\n// https://github.com/mathiasbynens/unicode-2.1.8/blob/master/Bidi_Class/Right_To_Left/regex.js\nconst RTL_PATTERN =\n  /[\\u05BE\\u05C0\\u05C3\\u05D0-\\u05EA\\u05F0-\\u05F4\\u061B\\u061F\\u0621-\\u063A\\u0640-\\u064A\\u066D\\u0671-\\u06B7\\u06BA-\\u06BE\\u06C0-\\u06CE\\u06D0-\\u06D5\\u06E5\\u06E6\\u200F\\u202B\\u202E\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE72\\uFE74\\uFE76-\\uFEFC]/\n\nexport const getDirection = (function() {\n  const input = makeElement(\"input\", { dir: \"auto\", name: \"x\", dirName: \"x.dir\" })\n  const textArea = makeElement(\"textarea\", { dir: \"auto\", name: \"y\", dirName: \"y.dir\" })\n  const form = makeElement(\"form\")\n  form.appendChild(input)\n  form.appendChild(textArea)\n\n  const supportsDirName = (function() {\n    try {\n      return new FormData(form).has(textArea.dirName)\n    } catch (error) {\n      return false\n    }\n  })()\n\n  const supportsDirSelector = (function() {\n    try {\n      return input.matches(\":dir(ltr),:dir(rtl)\")\n    } catch (error) {\n      return false\n    }\n  })()\n\n  if (supportsDirName) {\n    return function(string) {\n      textArea.value = string\n      return new FormData(form).get(textArea.dirName)\n    }\n  } else if (supportsDirSelector) {\n    return function(string) {\n      input.value = string\n      if (input.matches(\":dir(rtl)\")) {\n        return \"rtl\"\n      } else {\n        return \"ltr\"\n      }\n    }\n  } else {\n    return function(string) {\n      const char = string.trim().charAt(0)\n      if (RTL_PATTERN.test(char)) {\n        return \"rtl\"\n      } else {\n        return \"ltr\"\n      }\n    }\n  }\n})()\n","const androidVersionMatch = navigator.userAgent.match(/android\\s([0-9]+.*Chrome)/i)\nconst androidVersion = androidVersionMatch && parseInt(androidVersionMatch[1])\n\nexport default {\n  // Android emits composition events when moving the cursor through existing text\n  // Introduced in Chrome 65: https://bugs.chromium.org/p/chromium/issues/detail?id=764439#c9\n  composesExistingText: /Android.*Chrome/.test(navigator.userAgent),\n\n  // Android 13, especially on Samsung keyboards, emits extra compositionend and beforeinput events\n  // that can make the input handler lose the current selection or enter an infinite input -> render -> input\n  // loop.\n  recentAndroid: androidVersion && androidVersion > 12,\n  samsungAndroid: androidVersion && navigator.userAgent.match(/Android.*SM-/),\n\n  // IE 11 activates resizing handles on editable elements that have \"layout\"\n  forcesObjectResizing: /Trident.*rv:11/.test(navigator.userAgent),\n  // https://www.w3.org/TR/input-events-1/ + https://www.w3.org/TR/input-events-2/\n  supportsInputEvents: typeof InputEvent !== \"undefined\" &&\n    [ \"data\", \"getTargetRanges\", \"inputType\" ].every(prop => prop in InputEvent.prototype),\n}\n","import browser from \"rico/config/browser\"\n\nconst input = {\n  level2Enabled: true,\n\n  getLevel() {\n    if (this.level2Enabled && browser.supportsInputEvents) {\n      return 2\n    } else {\n      return 0\n    }\n  }\n}\n\nexport default input\n","export default {\n  8: \"backspace\",\n  9: \"tab\",\n  13: \"return\",\n  27: \"escape\",\n  37: \"left\",\n  39: \"right\",\n  46: \"delete\",\n  68: \"d\",\n  72: \"h\",\n  79: \"o\",\n}\n","export default {\n  bold: \"Bold\",\n  bullets: \"Bulleted list\",\n  code: \"Preformatted text\",\n  heading1: \"Heading T1\",\n  heading2: \"Heading T2\",\n  heading3: \"Heading T3\",\n  indent: \"Indent\",\n  italic: \"Italic\",\n  link: \"Link\",\n  numbers: \"Numbered list\",\n  outdent: \"Outdent\",\n  quote: \"Quoted text\",\n  redo: \"Redo\",\n  remove: \"Remove\",\n  small: \"Small\",\n  strike: \"Strikethrough\",\n  undo: \"Undo\",\n  unlink: \"Unlink\",\n  url: \"URL\",\n  urlPlaceholder: \"Enter a URLâ€¦\",\n}\n","export default {\n  removeBlankTableCells: false,\n  tableCellSeparator: \" | \",\n  tableRowSeparator: \"\\n\",\n}\n","export default {\n  bold: {\n    tagName: \"strong\",\n    inheritable: true,\n    parser(element) {\n      const style = window.getComputedStyle(element)\n      return style.fontWeight === \"bold\" || style.fontWeight >= 600\n    },\n  },\n  italic: {\n    tagName: \"em\",\n    inheritable: true,\n    parser(element) {\n      const style = window.getComputedStyle(element)\n      return style.fontStyle === \"italic\"\n    },\n  },\n  small: {\n    tagName: \"small\",\n    inheritable: true,\n    parser(element) {\n      const style = window.getComputedStyle(element)\n      return style.fontStyle === \"small\"\n    },\n  },\n  href: {\n    groupTagName: \"a\",\n    parser(element) {\n      const matchingSelector = \"a\"\n      const link = element.closest(matchingSelector)\n      if (link) {\n        return link.getAttribute(\"href\")\n      }\n    },\n  },\n  strike: {\n    tagName: \"del\",\n    inheritable: true,\n  },\n  frozen: {\n    style: { backgroundColor: \"highlight\" },\n  },\n}\n","import lang from \"rico/config/lang\"\n\nexport default {\n  getDefaultHTML() {\n    return `<div class=\"rico-button-row\">\n      <span class=\"rico-button-group rico-button-group-text-tools\" data-rico-button-group=\"text-tools\">\n        <button type=\"button\" class=\"rico-button rico-button-bold\" data-rico-attribute=\"bold\" data-rico-key=\"b\" title=\"${lang.bold}\" tabindex=\"-1\">${lang.bold}</button>\n        <button type=\"button\" class=\"rico-button rico-button-italic\" data-rico-attribute=\"italic\" data-rico-key=\"i\" title=\"${lang.italic}\" tabindex=\"-1\">${lang.italic}</button>\n        <button type=\"button\" class=\"rico-button rico-button-small\" data-rico-attribute=\"small\" data-rico-key=\"shift+b\" title=\"${lang.small}\" tabindex=\"-1\">${lang.small}</button>\n        <button type=\"button\" class=\"rico-button rico-button-strike\" data-rico-attribute=\"strike\" data-rico-key=\"shift+i\" title=\"${lang.strike}\" tabindex=\"-1\">${lang.strike}</button>\n        <button type=\"button\" class=\"rico-button rico-button-link\" data-rico-attribute=\"href\" data-rico-action=\"link\" data-rico-key=\"k\" title=\"${lang.link}\" tabindex=\"-1\">${lang.link}</button>\n      </span>\n\n      <span class=\"rico-button-group rico-button-group-block-tools\" data-rico-button-group=\"block-tools\">\n        <button type=\"button\" class=\"rico-button rico-button-heading1\" data-rico-attribute=\"heading1\" data-rico-key=\"g\" title=\"${lang.heading1}\" tabindex=\"-1\">${lang.heading1}</button>\n        <button type=\"button\" class=\"rico-button rico-button-heading2\" data-rico-attribute=\"heading2\" data-rico-key=\"shift+g\" title=\"${lang.heading2}\" tabindex=\"-1\">${lang.heading2}</button>\n        \n        <button type=\"button\" class=\"rico-button rico-button-quote\" data-rico-attribute=\"quote\" data-rico-key=\"e\" title=\"${lang.quote}\" tabindex=\"-1\">${lang.quote}</button>\n        <button type=\"button\" class=\"rico-button rico-button-code\" data-rico-attribute=\"code\" data-rico-key=\"shift+e\" title=\"${lang.code}\" tabindex=\"-1\">${lang.code}</button>\n        \n        <button type=\"button\" class=\"rico-button rico-button-bullets\" data-rico-attribute=\"bullet\" data-rico-key=\".\" title=\"${lang.bullets}\" tabindex=\"-1\">${lang.bullets}</button>\n        <button type=\"button\" class=\"rico-button rico-button-numbers\" data-rico-attribute=\"number\" data-rico-key=\"shift+.\" title=\"${lang.numbers}\" tabindex=\"-1\">${lang.numbers}</button>\n        \n        <button type=\"button\" class=\"rico-button rico-button-unindent\" data-rico-action=\"decreaseNestingLevel\" title=\"${lang.outdent}\" tabindex=\"-1\">${lang.outdent}</button>\n        <button type=\"button\" class=\"rico-button rico-button-indent\" data-rico-action=\"increaseNestingLevel\" title=\"${lang.indent}\" tabindex=\"-1\">${lang.indent}</button>\n      </span>\n\n      <span class=\"rico-button-group rico-button-group-history-tools\" data-rico-button-group=\"history-tools\">\n        <button type=\"button\" class=\"rico-button rico-button-undo\" data-rico-action=\"undo\" data-rico-key=\"z\" title=\"${lang.undo}\" tabindex=\"-1\">${lang.undo}</button>\n        <button type=\"button\" class=\"rico-button rico-button-redo\" data-rico-action=\"redo\" data-rico-key=\"shift+z\" title=\"${lang.redo}\" tabindex=\"-1\">${lang.redo}</button>\n      </span>\n    </div>\n\n    <div class=\"rico-dialogs\" data-rico-dialogs>\n      <div class=\"rico-dialog rico-dialog-link\" data-rico-dialog=\"href\" data-rico-dialog-attribute=\"href\">\n        <div class=\"rico-dialog__link-fields\">\n          <input type=\"url\" name=\"href\" class=\"rico-input rico-input-dialog\" placeholder=\"${lang.urlPlaceholder}\" aria-label=\"${lang.url}\" required data-rico-input>\n          <div class=\"rico-button-group\">\n            <input type=\"button\" class=\"rico-button rico-button-dialog\" value=\"${lang.link}\" data-rico-method=\"setAttribute\">\n            <input type=\"button\" class=\"rico-button rico-button-dialog\" value=\"${lang.unlink}\" data-rico-method=\"removeAttribute\">\n          </div>\n        </div>\n      </div>\n    </div>`\n  },\n}\n","const undo = { interval: 5000 }\nexport default undo\n","import * as config from \"rico/config\"\n\nlet allAttributeNames = null\nlet blockAttributeNames = null\nlet textAttributeNames = null\nlet listAttributeNames = null\n\nexport const getAllAttributeNames = () => {\n  if (!allAttributeNames) {\n    allAttributeNames = getTextAttributeNames().concat(getBlockAttributeNames())\n  }\n  return allAttributeNames\n}\n\nexport const getBlockConfig = (attributeName) => config.blockAttributes[attributeName]\n\nexport const getBlockAttributeNames = () => {\n  if (!blockAttributeNames) {\n    blockAttributeNames = Object.keys(config.blockAttributes)\n  }\n  return blockAttributeNames\n}\n\nexport const getTextConfig = (attributeName) => config.textAttributes[attributeName]\n\nexport const getTextAttributeNames = () => {\n  if (!textAttributeNames) {\n    textAttributeNames = Object.keys(config.textAttributes)\n  }\n  return textAttributeNames\n}\n\nexport const getListAttributeNames = () => {\n  if (!listAttributeNames) {\n    listAttributeNames = []\n    for (const key in config.blockAttributes) {\n      const { listAttribute } = config.blockAttributes[key]\n      if (listAttribute != null) {\n        listAttributeNames.push(listAttribute)\n      }\n    }\n  }\n  return listAttributeNames\n}\n","const testTransferData = { \"application/x-rico-feature-detection\": \"test\" }\n\nexport const dataTransferIsPlainText = function(dataTransfer) {\n  const text = dataTransfer.getData(\"text/plain\")\n  const html = dataTransfer.getData(\"text/html\")\n\n  if (text && html) {\n    const { body } = new DOMParser().parseFromString(html, \"text/html\")\n    if (body.textContent === text) {\n      return !body.querySelector(\"*\")\n    }\n  } else {\n    return text?.length\n  }\n}\n\nexport const dataTransferIsWritable = function(dataTransfer) {\n  if (!dataTransfer?.setData) return false\n\n  for (const key in testTransferData) {\n    const value = testTransferData[key]\n\n    try {\n      dataTransfer.setData(key, value)\n      if (!dataTransfer.getData(key) === value) return false\n    } catch (error) {\n      return false\n    }\n  }\n  return true\n}\n\nexport const keyEventIsKeyboardCommand = (function() {\n  if (/Mac|^iP/.test(navigator.platform)) {\n    return (event) => event.metaKey\n  } else {\n    return (event) => event.ctrlKey\n  }\n})()\n","export const defer = (fn) => setTimeout(fn, 1)\n","/* eslint-disable\n    id-length,\n*/\nexport const copyObject = function(object = {}) {\n  const result = {}\n  for (const key in object) {\n    const value = object[key]\n    result[key] = value\n  }\n  return result\n}\n\nexport const objectsAreEqual = function(a = {}, b = {}) {\n  if (Object.keys(a).length !== Object.keys(b).length) {\n    return false\n  }\n  for (const key in a) {\n    const value = a[key]\n    if (value !== b[key]) {\n      return false\n    }\n  }\n  return true\n}\n","import { copyObject, objectsAreEqual } from \"rico/core/helpers/objects\"\n\nexport const normalizeRange = function(range) {\n  if (range == null) return\n\n  if (!Array.isArray(range)) {\n    range = [ range, range ]\n  }\n  return [ copyValue(range[0]), copyValue(range[1] != null ? range[1] : range[0]) ]\n}\n\nexport const rangeIsCollapsed = function(range) {\n  if (range == null) return\n\n  const [ start, end ] = normalizeRange(range)\n  return rangeValuesAreEqual(start, end)\n}\n\nexport const rangesAreEqual = function(leftRange, rightRange) {\n  if (leftRange == null || rightRange == null) return\n\n  const [ leftStart, leftEnd ] = normalizeRange(leftRange)\n  const [ rightStart, rightEnd ] = normalizeRange(rightRange)\n  return rangeValuesAreEqual(leftStart, rightStart) && rangeValuesAreEqual(leftEnd, rightEnd)\n}\n\nconst copyValue = function(value) {\n  if (typeof value === \"number\") {\n    return value\n  } else {\n    return copyObject(value)\n  }\n}\n\nconst rangeValuesAreEqual = function(left, right) {\n  if (typeof left === \"number\") {\n    return left === right\n  } else {\n    return objectsAreEqual(left, right)\n  }\n}\n","export default class BasicObject {\n  static proxyMethod(expression) {\n    const { name, toMethod, toProperty, optional } = parseProxyMethodExpression(expression)\n\n    this.prototype[name] = function() {\n      let subject\n      let object\n\n      if (toMethod) {\n        if (optional) {\n          object = this[toMethod]?.()\n        } else {\n          object = this[toMethod]()\n        }\n      } else if (toProperty) {\n        object = this[toProperty]\n      }\n\n      if (optional) {\n        subject = object?.[name]\n        if (subject) {\n          return apply.call(subject, object, arguments)\n        }\n      } else {\n        subject = object[name]\n        return apply.call(subject, object, arguments)\n      }\n    }\n  }\n}\n\nconst parseProxyMethodExpression = function(expression) {\n  const match = expression.match(proxyMethodExpressionPattern)\n  if (!match) {\n    throw new Error(`can't parse @proxyMethod expression: ${expression}`)\n  }\n\n  const args = { name: match[4] }\n\n  if (match[2] != null) {\n    args.toMethod = match[1]\n  } else {\n    args.toProperty = match[1]\n  }\n\n  if (match[3] != null) {\n    args.optional = true\n  }\n\n  return args\n}\n\nconst { apply } = Function.prototype\n\nconst proxyMethodExpressionPattern = new RegExp(\"\\\n^\\\n(.+?)\\\n(\\\\(\\\\))?\\\n(\\\\?)?\\\n\\\\.\\\n(.+?)\\\n$\\\n\")\n","/* eslint-disable\n    id-length,\n*/\nimport BasicObject from \"rico/core/basic_object\"\n\nexport default class SelectionChangeObserver extends BasicObject {\n  constructor() {\n    super(...arguments)\n    this.update = this.update.bind(this)\n    this.run = this.run.bind(this)\n    this.selectionManagers = []\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true\n      if (\"onselectionchange\" in document) {\n        return document.addEventListener(\"selectionchange\", this.update, true)\n      } else {\n        return this.run()\n      }\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false\n      return document.removeEventListener(\"selectionchange\", this.update, true)\n    }\n  }\n\n  registerSelectionManager(selectionManager) {\n    if (!this.selectionManagers.includes(selectionManager)) {\n      this.selectionManagers.push(selectionManager)\n      return this.start()\n    }\n  }\n\n  unregisterSelectionManager(selectionManager) {\n    this.selectionManagers = this.selectionManagers.filter((s) => s !== selectionManager)\n    if (this.selectionManagers.length === 0) {\n      return this.stop()\n    }\n  }\n\n  notifySelectionManagersOfSelectionChange() {\n    return this.selectionManagers.map((selectionManager) => selectionManager.selectionDidChange())\n  }\n\n  update() {\n    const domRange = getDOMRange()\n    const caretMove = window.getSelection().type === \"Caret\"\n\n    if (!domRangesAreEqual(domRange, this.domRange) || caretMove) {\n      this.domRange = domRange\n      return this.notifySelectionManagersOfSelectionChange()\n    }\n  }\n\n  reset() {\n    this.domRange = null\n    return this.update()\n  }\n\n  // Private\n\n  run() {\n    if (this.started) {\n      this.update()\n      return requestAnimationFrame(this.run)\n    }\n  }\n}\n\nconst domRangesAreEqual = (left, right) =>\n  left?.startContainer === right?.startContainer &&\n  left?.startOffset === right?.startOffset &&\n  left?.endContainer === right?.endContainer &&\n  left?.endOffset === right?.endOffset\n\nexport const selectionChangeObserver = new SelectionChangeObserver()\n\nexport const getDOMSelection = function() {\n  const selection = window.getSelection()\n  if (selection.rangeCount > 0) {\n    return selection\n  }\n}\n\nexport const getDOMRange = function() {\n  const domRange = getDOMSelection()?.getRangeAt(0)\n  if (domRange) {\n    if (!domRangeIsPrivate(domRange)) {\n      return domRange\n    }\n  }\n}\n\nexport const setDOMRange = function(domRange) {\n  const selection = window.getSelection()\n  selection.removeAllRanges()\n  selection.addRange(domRange)\n  return selectionChangeObserver.update()\n}\n\n// In Firefox, clicking certain <input> elements changes the selection to a\n// private element used to draw its UI. Attempting to access properties of those\n// elements throws an error.\n// https://bugzilla.mozilla.org/show_bug.cgi?id=208427\nconst domRangeIsPrivate = (domRange) => nodeIsPrivate(domRange.startContainer) || nodeIsPrivate(domRange.endContainer)\n\nconst nodeIsPrivate = (node) => !Object.getPrototypeOf(node)\n","import BasicObject from \"rico/core/basic_object\"\n\nexport default class UTF16String extends BasicObject {\n  static box(value = \"\") {\n    if (value instanceof this) {\n      return value\n    } else {\n      return this.fromUCS2String(value?.toString())\n    }\n  }\n\n  static fromUCS2String(ucs2String) {\n    return new this(ucs2String, ucs2decode(ucs2String))\n  }\n\n  static fromCodepoints(codepoints) {\n    return new this(ucs2encode(codepoints), codepoints)\n  }\n\n  constructor(ucs2String, codepoints) {\n    super(...arguments)\n    this.ucs2String = ucs2String\n    this.codepoints = codepoints\n    this.length = this.codepoints.length\n    this.ucs2Length = this.ucs2String.length\n  }\n\n  offsetToUCS2Offset(offset) {\n    return ucs2encode(this.codepoints.slice(0, Math.max(0, offset))).length\n  }\n\n  offsetFromUCS2Offset(ucs2Offset) {\n    return ucs2decode(this.ucs2String.slice(0, Math.max(0, ucs2Offset))).length\n  }\n\n  slice() {\n    return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))\n  }\n\n  charAt(offset) {\n    return this.slice(offset, offset + 1)\n  }\n\n  isEqualTo(value) {\n    return this.constructor.box(value).ucs2String === this.ucs2String\n  }\n\n  toJSON() {\n    return this.ucs2String\n  }\n\n  getCacheKey() {\n    return this.ucs2String\n  }\n\n  toString() {\n    return this.ucs2String\n  }\n}\n\nconst hasArrayFrom = Array.from?.(\"\\ud83d\\udc7c\").length === 1\nconst hasStringCodePointAt = \" \".codePointAt?.(0) != null\nconst hasStringFromCodePoint = String.fromCodePoint?.(32, 128124) === \" \\ud83d\\udc7c\"\n\n// UCS-2 conversion helpers ported from Mathias Bynens' Punycode.js:\n// https://github.com/bestiejs/punycode.js#punycodeucs2\n\nlet ucs2decode, ucs2encode\n\n// Creates an array containing the numeric code points of each Unicode\n// character in the string. While JavaScript uses UCS-2 internally,\n// this function will convert a pair of surrogate halves (each of which\n// UCS-2 exposes as separate characters) into a single code point,\n// matching UTF-16.\nif (hasArrayFrom && hasStringCodePointAt) {\n  ucs2decode = (string) => Array.from(string).map((char) => char.codePointAt(0))\n} else {\n  ucs2decode = function(string) {\n    const output = []\n    let counter = 0\n    const { length } = string\n\n    while (counter < length) {\n      let value = string.charCodeAt(counter++)\n      if (0xd800 <= value && value <= 0xdbff && counter < length) {\n        // high surrogate, and there is a next character\n        const extra = string.charCodeAt(counter++)\n        if ((extra & 0xfc00) === 0xdc00) {\n          // low surrogate\n          value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000\n        } else {\n          // unmatched surrogate; only append this code unit, in case the\n          // next code unit is the high surrogate of a surrogate pair\n          counter--\n        }\n      }\n      output.push(value)\n    }\n\n    return output\n  }\n}\n\n// Creates a string based on an array of numeric code points.\nif (hasStringFromCodePoint) {\n  ucs2encode = (array) => String.fromCodePoint(...Array.from(array || []))\n} else {\n  ucs2encode = function(array) {\n    const characters = (() => {\n      const result = []\n\n      Array.from(array).forEach((value) => {\n        let output = \"\"\n        if (value > 0xffff) {\n          value -= 0x10000\n          output += String.fromCharCode(value >>> 10 & 0x3ff | 0xd800)\n          value = 0xdc00 | value & 0x3ff\n        }\n        result.push(output + String.fromCharCode(value))\n      })\n\n      return result\n    })()\n\n    return characters.join(\"\")\n  }\n}\n","/* eslint-disable\n    id-length,\n    no-useless-escape,\n*/\nimport { NON_BREAKING_SPACE, ZERO_WIDTH_SPACE } from \"rico/constants\"\nimport UTF16String from \"rico/core/utilities/utf16_string\"\n\nexport const normalizeSpaces = (string) =>\n  string.replace(new RegExp(`${ZERO_WIDTH_SPACE}`, \"g\"), \"\").replace(new RegExp(`${NON_BREAKING_SPACE}`, \"g\"), \" \")\n\nexport const normalizeNewlines = (string) => string.replace(/\\r\\n/g, \"\\n\")\n\nexport const breakableWhitespacePattern = new RegExp(`[^\\\\S${NON_BREAKING_SPACE}]`)\n\nexport const squishBreakableWhitespace = (string) =>\n  string\n    // Replace all breakable whitespace characters with a space\n    .replace(new RegExp(`${breakableWhitespacePattern.source}`, \"g\"), \" \")\n    // Replace two or more spaces with a single space\n    .replace(/\\ {2,}/g, \" \")\n\nexport const summarizeStringChange = function(oldString, newString) {\n  let added, removed\n  oldString = UTF16String.box(oldString)\n  newString = UTF16String.box(newString)\n\n  if (newString.length < oldString.length) {\n    [ removed, added ] = utf16StringDifferences(oldString, newString)\n  } else {\n    [ added, removed ] = utf16StringDifferences(newString, oldString)\n  }\n\n  return { added, removed }\n}\n\nconst utf16StringDifferences = function(a, b) {\n  if (a.isEqualTo(b)) {\n    return [ \"\", \"\" ]\n  }\n\n  const diffA = utf16StringDifference(a, b)\n  const { length } = diffA.utf16String\n\n  let diffB\n\n  if (length) {\n    const { offset } = diffA\n    const codepoints = a.codepoints.slice(0, offset).concat(a.codepoints.slice(offset + length))\n    diffB = utf16StringDifference(b, UTF16String.fromCodepoints(codepoints))\n  } else {\n    diffB = utf16StringDifference(b, a)\n  }\n\n  return [ diffA.utf16String.toString(), diffB.utf16String.toString() ]\n}\n\nconst utf16StringDifference = function(a, b) {\n  let leftIndex = 0\n  let rightIndexA = a.length\n  let rightIndexB = b.length\n\n  while (leftIndex < rightIndexA && a.charAt(leftIndex).isEqualTo(b.charAt(leftIndex))) {\n    leftIndex++\n  }\n\n  while (rightIndexA > leftIndex + 1 && a.charAt(rightIndexA - 1).isEqualTo(b.charAt(rightIndexB - 1))) {\n    rightIndexA--\n    rightIndexB--\n  }\n\n  return {\n    utf16String: a.slice(leftIndex, rightIndexA),\n    offset: leftIndex,\n  }\n}\n","import { handleEvent } from \"rico/core/helpers\"\n\nexport default class View {\n  constructor(editorElement) {\n    this.editorElement = editorElement\n    this.editorController = this.editorElement.editorController\n    this.editor = this.editorElement.editor\n    this.compositionController = this.editorController.compositionController\n    this.composition = this.editorController.composition\n\n    this.element = document.createElement(\"details\")\n    if (this.getSetting(\"open\") === \"true\") {\n      this.element.open = true\n    }\n    this.element.classList.add(this.constructor.template)\n\n    this.titleElement = document.createElement(\"summary\")\n    this.element.appendChild(this.titleElement)\n\n    this.panelElement = document.createElement(\"div\")\n    this.panelElement.classList.add(\"panel\")\n    this.element.appendChild(this.panelElement)\n\n    this.element.addEventListener(\"toggle\", (event) => {\n      if (event.target === this.element) {\n        return this.didToggle()\n      }\n    })\n\n    if (this.events) {\n      this.installEventHandlers()\n    }\n  }\n\n  installEventHandlers() {\n    for (const eventName in this.events) {\n      const handler = this.events[eventName]\n      const callback = (event) => {\n        requestAnimationFrame(() => {\n          handler.call(this, event)\n        })\n      }\n\n      handleEvent(eventName, { onElement: this.editorElement, withCallback: callback })\n    }\n  }\n\n  didToggle(event) {\n    this.saveSetting(\"open\", this.isOpen())\n    return this.render()\n  }\n\n  isOpen() {\n    return this.element.hasAttribute(\"open\")\n  }\n\n  getTitle() {\n    return this.title || \"\"\n  }\n\n  render() {\n    this.renderTitle()\n    if (this.isOpen()) {\n      this.panelElement.innerHTML = window.JST[`rico/inspector/templates/${this.constructor.template}`].apply(this)\n    }\n  }\n\n  renderTitle() {\n    this.titleElement.innerHTML = this.getTitle()\n  }\n\n  getSetting(key) {\n    key = this.getSettingsKey(key)\n    return window.sessionStorage?.[key]\n  }\n\n  saveSetting(key, value) {\n    key = this.getSettingsKey(key)\n    if (window.sessionStorage) {\n      window.sessionStorage[key] = value\n    }\n  }\n\n  getSettingsKey(key) {\n    return `rico/inspector/${this.template}/${key}`\n  }\n\n  get title() {\n    return this.constructor.title\n  }\n\n  get template() {\n    return this.constructor.template\n  }\n\n  get events() {\n    return this.constructor.events\n  }\n}\n","import View from \"inspector/view\"\n\nimport { handleEvent } from \"rico/core/helpers\"\n\nclass DebugView extends View {\n  static title = \"Debug\"\n  static template = \"debug\"\n\n  constructor() {\n    super(...arguments)\n    this.didToggleViewCaching = this.didToggleViewCaching.bind(this)\n    this.didClickRenderButton = this.didClickRenderButton.bind(this)\n    this.didClickParseButton = this.didClickParseButton.bind(this)\n    this.didToggleControlElement = this.didToggleControlElement.bind(this)\n\n    handleEvent(\"change\", {\n      onElement: this.element,\n      matchingSelector: \"input[name=viewCaching]\",\n      withCallback: this.didToggleViewCaching,\n    })\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: \"button[data-action=render]\",\n      withCallback: this.didClickRenderButton,\n    })\n    handleEvent(\"click\", {\n      onElement: this.element,\n      matchingSelector: \"button[data-action=parse]\",\n      withCallback: this.didClickParseButton,\n    })\n    handleEvent(\"change\", {\n      onElement: this.element,\n      matchingSelector: \"input[name=controlElement]\",\n      withCallback: this.didToggleControlElement,\n    })\n  }\n\n  didToggleViewCaching({ target }) {\n    if (target.checked) {\n      return this.compositionController.enableViewCaching()\n    } else {\n      return this.compositionController.disableViewCaching()\n    }\n  }\n\n  didClickRenderButton() {\n    return this.editorController.render()\n  }\n\n  didClickParseButton() {\n    return this.editorController.reparse()\n  }\n\n  didToggleControlElement({ target }) {\n    if (target.checked) {\n      this.control = new Rico.Inspector.ControlElement(this.editorElement)\n    } else {\n      this.control?.uninstall()\n      this.control = null\n    }\n  }\n}\n\nRico.Inspector.registerView(DebugView)\n","import View from \"inspector/view\"\n\nclass DocumentView extends View {\n  static title = \"Document\"\n  static template = \"document\"\n  static events = {\n    \"rico-change\": function() {\n      return this.render()\n    },\n  }\n\n  render() {\n    this.document = this.editor.getDocument()\n    return super.render(...arguments)\n  }\n}\n\nRico.Inspector.registerView(DocumentView)\n","import View from \"inspector/view\"\nconst now = window.performance?.now ? () => performance.now() : () => new Date().getTime()\n\nclass PerformanceView extends View {\n  static title = \"Performance\"\n  static template = \"performance\"\n\n  constructor() {\n    super(...arguments)\n    this.documentView = this.compositionController.documentView\n\n    this.data = {}\n    this.track(\"documentView.render\")\n    this.track(\"documentView.sync\")\n    this.track(\"documentView.garbageCollectCachedViews\")\n    this.track(\"composition.replaceHTML\")\n\n    this.render()\n  }\n\n  track(methodPath) {\n    this.data[methodPath] = { calls: 0, total: 0, mean: 0, max: 0, last: 0 }\n    const parts = methodPath.split(\".\")\n    const propertyNames = parts.slice(0, parts.length - 1)\n    const methodName = parts[parts.length - 1]\n\n    let object = this\n\n    propertyNames.forEach((propertyName) => {\n      object = object[propertyName]\n    })\n\n    const original = object[methodName]\n\n    object[methodName] = function() {\n      const started = now()\n      const result = original.apply(object, arguments)\n      const timing = now() - started\n      this.record(methodPath, timing)\n      return result\n    }.bind(this)\n  }\n\n  record(methodPath, timing) {\n    const data = this.data[methodPath]\n    data.calls += 1\n    data.total += timing\n    data.mean = data.total / data.calls\n    if (timing > data.max) {\n      data.max = timing\n    }\n    data.last = timing\n    return this.render()\n  }\n\n  round(ms) {\n    return Math.round(ms * 1000) / 1000\n  }\n}\n\nRico.Inspector.registerView(PerformanceView)\n","import View from \"inspector/view\"\n\nexport default class RenderView extends View {\n  static title = \"Renders\"\n  static template = \"render\"\n  static events = {\n    \"rico-render\": function() {\n      this.renderCount++\n      return this.render()\n    },\n\n    \"rico-sync\": function() {\n      this.syncCount++\n      return this.render()\n    },\n  }\n\n  constructor() {\n    super(...arguments)\n    this.renderCount = 0\n    this.syncCount = 0\n  }\n\n  getTitle() {\n    return `${this.title} (${this.renderCount})`\n  }\n}\n\nRico.Inspector.registerView(RenderView)\n","import View from \"inspector/view\"\nimport UTF16String from \"rico/core/utilities/utf16_string\"\n\nclass SelectionView extends View {\n  static title = \"Selection\"\n  static template = \"selection\"\n  static events = {\n    \"rico-selection-change\": function() {\n      return this.render()\n    },\n    \"rico-render\": function() {\n      return this.render()\n    },\n  }\n\n  render() {\n    this.document = this.editor.getDocument()\n    this.range = this.editor.getSelectedRange()\n    this.locationRange = this.composition.getLocationRange()\n    this.characters = this.getCharacters()\n    return super.render(...arguments)\n  }\n\n  getCharacters() {\n    const chars = []\n    const utf16string = UTF16String.box(this.document.toString())\n    const rangeIsExpanded = this.range[0] !== this.range[1]\n    let position = 0\n    while (position < utf16string.length) {\n      let string = utf16string.charAt(position).toString()\n      if (string === \"\\n\") {\n        string = \"âŽ\"\n      }\n      const selected = rangeIsExpanded && position >= this.range[0] && position < this.range[1]\n      chars.push({ string, selected })\n      position++\n    }\n    return chars\n  }\n\n  getTitle() {\n    return `${this.title} (${this.range.join()})`\n  }\n}\n\nRico.Inspector.registerView(SelectionView)\n","import View from \"inspector/view\"\n\nclass UndoView extends View {\n  static title = \"Undo\"\n  static template = \"undo\"\n  static events = {\n    \"rico-change\": function() {\n      return this.render()\n    },\n  }\n\n  render() {\n    this.undoEntries = this.editor.undoManager.undoEntries\n    this.redoEntries = this.editor.undoManager.redoEntries\n    return super.render(...arguments)\n  }\n}\n\nRico.Inspector.registerView(UndoView)\n"],"names":["RicoInspector","HTMLElement","connectedCallback","editorElement","document","querySelector","dataset","ricoId","views","createViews","forEach","view","render","appendChild","element","disconnectedCallback","removeEventListener","resizeHandler","Rico","Inspector","map","View","sort","a","b","title","toLowerCase","window","customElements","define","registerView","constructor","push","install","createElement","body","JST","compositionController","isViewCachingEnabled","details","getBlocks","block","index","text","pieces","pieceList","toArray","id","JSON","stringify","attributes","length","getLength","piecePartials","join","piece","toString","Object","keys","data","name","dataMetrics","round","item","calls","mean","max","last","this","syncCount","locationRange","offset","charSpans","characters","Array","from","char","selected","undefined","string","entryList","undoEntries","redoEntries","entries","entry","description","selectedRange","snapshot","context","KEY_EVENTS","split","COMPOSITION_EVENTS","OBSERVER_OPTIONS","childList","characterData","characterDataOldValue","subtree","ControlElement","didMutate","bind","logInputEvents","logMutations","uninstall","observer","disconnect","parentNode","removeChild","setAttribute","style","width","getComputedStyle","minHeight","border","insertBefore","nextSibling","eventName","addEventListener","event","console","log","type","keyCode","MutationObserver","observe","mutations","mutation","oldValue","target","addedNodes","node","inspectNode","removedNodes","outerHTML","arraysAreEqual","value","arrayStartsWith","slice","spliceArray","array","result","args","splice","summarizeArrayChange","oldArray","newArray","added","removed","existingValues","Set","add","currentValues","has","default","tagName","breakOnReturn","parse","quote","heading1","terminal","group","heading2","code","plaintext","bulletList","bullet","listAttribute","nestable","test","numberList","number","ZERO_WIDTH_SPACE","NON_BREAKING_SPACE","OBJECT_REPLACEMENT_CHARACTER","extend","properties","key","html","documentElement","match","matches","handleEvent","onElement","matchingSelector","withCallback","inPhase","preventDefault","times","selector","useCapture","handler","destroy","findClosestElementFromNode","call","handleEventOnce","options","triggerEvent","bubbles","cancelable","createEvent","initEvent","dispatchEvent","elementMatchesSelector","nodeType","untilNode","Node","ELEMENT_NODE","closest","findInnerElement","firstElementChild","innerElementIsActive","activeElement","elementContainsNode","findNodeFromContainerAndOffset","container","TEXT_NODE","firstChild","childNodes","findElementFromContainerAndOffset","findChildIndexOfNode","childIndex","previousSibling","removeNode","walkTree","tree","onlyNodesOfType","usingFilter","expandEntityReferences","whatToShow","NodeFilter","SHOW_ELEMENT","SHOW_TEXT","SHOW_COMMENT","SHOW_ALL","createTreeWalker","makeElement","tag","editable","contenteditable","className","classList","textContent","concat","childNode","blockTagNames","getBlockTagNames","blockAttributes","nodeIsBlockContainer","nodeIsBlockStartComment","nodeProbablyIsBlockContainer","includes","nodeIsBlockStart","strict","nodeIsCommentNode","COMMENT_NODE","nodeIsCursorTarget","nodeIsTextNode","ricoCursorTarget","nodeIsEmptyTextNode","RTL_PATTERN","getDirection","input","dir","dirName","textArea","form","supportsDirName","FormData","error","supportsDirSelector","get","trim","charAt","androidVersionMatch","navigator","userAgent","androidVersion","parseInt","composesExistingText","recentAndroid","samsungAndroid","forcesObjectResizing","supportsInputEvents","InputEvent","every","prop","prototype","level2Enabled","getLevel","browser","bold","bullets","heading3","indent","italic","link","numbers","outdent","redo","remove","small","strike","undo","unlink","url","urlPlaceholder","removeBlankTableCells","tableCellSeparator","tableRowSeparator","inheritable","parser","fontWeight","fontStyle","href","groupTagName","getAttribute","frozen","backgroundColor","getDefaultHTML","lang","interval","allAttributeNames","blockAttributeNames","textAttributeNames","listAttributeNames","getAllAttributeNames","getTextAttributeNames","getBlockAttributeNames","getBlockConfig","attributeName","config","getTextConfig","getListAttributeNames","testTransferData","dataTransferIsPlainText","dataTransfer","getData","DOMParser","parseFromString","dataTransferIsWritable","setData","keyEventIsKeyboardCommand","platform","metaKey","ctrlKey","defer","fn","setTimeout","copyObject","object","objectsAreEqual","normalizeRange","range","isArray","copyValue","rangeIsCollapsed","start","end","rangeValuesAreEqual","rangesAreEqual","leftRange","rightRange","leftStart","leftEnd","rightStart","rightEnd","left","right","BasicObject","proxyMethod","expression","toMethod","toProperty","optional","parseProxyMethodExpression","subject","apply","arguments","proxyMethodExpressionPattern","Error","Function","RegExp","SelectionChangeObserver","update","run","selectionManagers","started","stop","registerSelectionManager","selectionManager","unregisterSelectionManager","filter","s","notifySelectionManagersOfSelectionChange","selectionDidChange","domRange","getDOMRange","caretMove","getSelection","domRangesAreEqual","reset","requestAnimationFrame","startContainer","startOffset","endContainer","endOffset","selectionChangeObserver","getDOMSelection","selection","rangeCount","getRangeAt","domRangeIsPrivate","setDOMRange","removeAllRanges","addRange","nodeIsPrivate","getPrototypeOf","UTF16String","box","fromUCS2String","ucs2String","ucs2decode","fromCodepoints","codepoints","ucs2encode","ucs2Length","offsetToUCS2Offset","Math","offsetFromUCS2Offset","ucs2Offset","isEqualTo","toJSON","getCacheKey","hasArrayFrom","hasStringCodePointAt","codePointAt","hasStringFromCodePoint","String","fromCodePoint","output","counter","charCodeAt","extra","fromCharCode","normalizeSpaces","replace","normalizeNewlines","breakableWhitespacePattern","squishBreakableWhitespace","source","summarizeStringChange","oldString","newString","utf16StringDifferences","diffA","utf16StringDifference","utf16String","diffB","leftIndex","rightIndexA","rightIndexB","editorController","editor","composition","getSetting","open","template","titleElement","panelElement","didToggle","events","installEventHandlers","callback","saveSetting","isOpen","hasAttribute","getTitle","renderTitle","innerHTML","getSettingsKey","sessionStorage","DebugView","didToggleViewCaching","didClickRenderButton","didClickParseButton","didToggleControlElement","checked","enableViewCaching","disableViewCaching","reparse","control","DocumentView","getDocument","now","performance","Date","getTime","PerformanceView","documentView","track","methodPath","total","parts","propertyNames","methodName","propertyName","original","timing","record","ms","RenderView","renderCount","SelectionView","getSelectedRange","getLocationRange","getCharacters","chars","utf16string","rangeIsExpanded","position","UndoView","undoManager"],"mappings":"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"}